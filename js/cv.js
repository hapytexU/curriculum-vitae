var Curriculum=(function(){var o=$("#cv-leaflet"),k=o.find("div.cv-cover"),m=k.find(".cv-overlay"),c=k.find(".cv-front"),d=k.find(".cv-openclose"),a=o.find("div.cv-middle"),l=o.find("div.cv-right"),p=k.find("a.cv-button-open"),b=l.find("span.cv-close"),h=o.find("a.cv-viewdetails"),f=false,r=function(){i();g()},i=function(){d.on("click",function(t){var u=t.target?t.target:t.srcElement;if(u.id=="cv-frontopen"||u.id=="cv-frontclose"){if(o.hasClass("cv-open")){window.location.hash=""}else{window.location.hash="#open"}return false}});l.on("click",function(t){var u=t.target?t.target:t.srcElement;if(u.id=="cv-rightopen"||u.id=="cv-rightclose"){if(o.hasClass("cv-flip")){window.location.hash="#open"}else{window.location.hash="#flipped"}return false}});b.on("click",function(t){n();return false});h.on("click",function(t){o.removeClass("rm-in").children("div.cv-modal").remove();j($(this));return false})},e=function(){o.addClass("cv-open")},q=function(){o.addClass("cv-flip")},s=function(){o.removeClass("cv-flip")},n=function(){o.removeClass("cv-open cv-nodelay cv-in cv-close")},j=function(t){var z=recipe.text(),u=recipe.data("thumb"),y=recipe.parent().next().text(),w=recipe.attr("href");var v=$('<div class="rm-modal"><div class="rm-thumb" style="background-image: url('+u+')"></div><h5>'+z+"</h5><p>"+y+'</p><a href="'+w+'">See the recipe</a><span class="rm-close-modal">x</span></div>');v.appendTo(o);var x=v.outerHeight(true);v.css("margin-top",-x/2);setTimeout(function(){o.addClass("rm-in rm-nodelay");v.find("span.cv-close-modal").on("click",function(){o.removeClass("rm-in")})},0)},g=function(){var t=window.location.hash;if(t=="#open"){s();e()}else{if(t=="#flipped"){e();q()}else{s();n()}}};return{init:r,readHash:g}})();